<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Free Climate Risk Scan</title>

  <!-- jQuery + DataTables -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    * { box-sizing: border-box; scroll-behavior: smooth; }

    body {
      margin: 0;
      font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* ================= NAV ================= */
    .nav {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 16px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0,0,0,0.25);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }

    .nav .logo {
      font-size: 20px;
      font-weight: 700;
      color: white;
    }

    .nav a {
      margin-left: 28px;
      text-decoration: none;
      color: white;
      font-weight: 500;
      opacity: 0.9;
    }

    .nav a:hover { opacity: 1; }

    /* ================= HERO ================= */
    .hero {
      min-height: 100vh;
      padding: 120px 40px 60px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: white;
    }

    .hero h1 {
      font-size: 3.4rem;
      margin-bottom: 12px;
    }

    .hero p {
      font-size: 1.25rem;
      max-width: 720px;
      opacity: 0.9;
    }

    .cta {
      margin-top: 28px;
      padding: 16px 42px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg,#00c6ff,#0072ff);
    }

    /* ================= SECTIONS ================= */
    section {
      padding: 80px 40px;
      max-width: 1100px;
      margin: auto;
      color: #222;
    }

    section h2 {
      text-align: center;
      font-size: 2.4rem;
      margin-bottom: 40px;
    }

    /* ================= FAQ ================= */
    .faq {
      background: #fff;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }

    .faq-item {
      margin-bottom: 22px;
    }

    .faq-item h4 {
      margin-bottom: 6px;
      font-size: 18px;
    }

    .faq-item p {
      margin: 0;
      color: #555;
      line-height: 1.5;
    }

    /* ================= MODAL ================= */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.65);
      z-index: 2000;
    }

    .modal-content {
      background: white;
      margin: 3% auto;
      padding: 24px;
      width: 94%;
      max-width: 1200px;
      border-radius: 16px;
    }

    .close {
      float: right;
      font-size: 30px;
      cursor: pointer;
      color: #666;
    }

    #map {
      height: 380px;
      border-radius: 12px;
      margin: 15px 0;
    }

    .controls {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin: 15px 0;
    }

    input {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      width: 150px;
    }

    input[readonly] { background: #f5f6f8; }

    button {
      padding: 10px 22px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg,#1e90ff,#0f6fd9);
      color: white;
    }

    button:disabled { opacity: 0.5; }

    #status {
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      font-weight: 600;
    }

    .loading { background:#fff3cd;color:#856404 }
    .error { background:#f8d7da;color:#721c24 }
    .success { background:#d4edda;color:#155724 }

    table.dataTable { font-size: 13px; }

    .color-5 { background:#d73027;color:#fff }
    .color-4 { background:#f46d43;color:#fff }
    .color-3 { background:#fdae61 }
    .color-2 { background:#abd9e9 }
    .color-1 { background:#d1f2eb }
    .color-0 { background:#f8f9fa }
  </style>
</head>

<body>

<!-- ================= NAV ================= -->
<div class="nav">
  <div class="logo">Climate Risk Scan</div>
  <div>
    <a href="#home">Home</a>
    <a href="#product">Product</a>
    <a href="#faq">FAQ</a>
  </div>
</div>

<!-- ================= HERO ================= -->
<section id="home" class="hero">
  <h1>Free Climate Risk Scan</h1>
  <p>
    Evaluate physical climate risks for any location using
    satellite observations, CMIP6 projections, and IPCC-aligned methods.
  </p>
  <button class="cta" onclick="openModal()">üåç Start Free Scan</button>
</section>

<!-- ================= PRODUCT ================= -->
<section id="product">
  <h2>What This Tool Does</h2>
  <p style="text-align:center;font-size:18px;color:#333">
    This tool computes a multi-hazard climate risk matrix including heat,
    cold, precipitation, drought, flood, wildfire, and cyclone risk using
    Google Earth Engine, ERA5, CMIP6, and WRI Aqueduct datasets.
  </p>
</section>

<!-- ================= FAQ ================= -->
<section id="faq">
  <h2>Frequently Asked Questions</h2>

  <div class="faq">
    <div class="faq-item">
      <h4>What hazards are included?</h4>
      <p>
        The scan covers extreme and chronic heat & cold stress, temperature anomaly,
        precipitation change, extreme precipitation, drought, riverine flood,
        coastal flood, wildfire, and cyclone risk.
      </p>
    </div>

    <div class="faq-item">
      <h4>What climate datasets are used?</h4>
      <p>
        The tool uses ERA5 reanalysis for observed climate,
        NASA GDDP-CMIP6 projections for future scenarios,
        WRI Aqueduct for water-related risks,
        and IPCC AR6 sea-level rise multipliers.
      </p>
    </div>

    <div class="faq-item">
      <h4>How long does one location take to process?</h4>
      <p>
        A single location typically takes <b>3‚Äì10 minutes</b>, depending on
        server load and the complexity of Earth Engine computations.
      </p>
    </div>

    <div class="faq-item">
      <h4>Is this aligned with ESG and climate risk frameworks?</h4>
      <p>
        Yes. The outputs are suitable for physical climate risk screening,
        ESG reporting, TCFD analysis, and preliminary asset-level assessments.
      </p>
    </div>

    <div class="faq-item">
      <h4>Is this a probabilistic loss model?</h4>
      <p>
        No. This is a hazard and exposure-based risk screening tool.
        It does not estimate financial losses or insurance metrics.
      </p>
    </div>

    <div class="faq-item">
      <h4>Is the scan really free?</h4>
      <p>
        Yes. The free scan allows anyone to assess climate hazard exposure
        for individual locations without registration.
      </p>
    </div>
  </div>
</section>

<!-- ================= MODAL ================= -->
<div id="scanModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Climate Hazard Matrix</h2>
    <p>Select a location on the map</p>

    <div id="map"></div>

    <div class="controls">
      <input id="lat" placeholder="Latitude" readonly>
      <input id="lon" placeholder="Longitude" readonly>
      <input id="city" placeholder="City (optional)">
      <button id="computeBtn" onclick="compute()" disabled>üöÄ Compute Risk</button>
    </div>

    <div id="status"></div>

    <div id="results" style="display:none">
      <h3 id="resultsTitle"></h3>
      <table id="hazardTable" class="display" style="width:100%">
        <thead><tr><th>Hazard</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<script>
let map, marker = null, isComputing = false;

function openModal(){
  document.getElementById('scanModal').style.display = 'block';
  setTimeout(()=>map.invalidateSize(),300);
}
function closeModal(){
  document.getElementById('scanModal').style.display = 'none';
}

function initMap(){
  map = L.map('map',{center:[20,0],zoom:2});
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
  map.on('click',e=>{
    const lat=e.latlng.lat.toFixed(5), lon=e.latlng.lng.toFixed(5);
    latEl.value=lat; lonEl.value=lon;
    marker?marker.setLatLng(e.latlng):marker=L.marker(e.latlng).addTo(map);
    computeBtn.disabled=false;
    showStatus(`üìç Location selected: ${lat}, ${lon}`,'success');
  });
}

const latEl=()=>document.getElementById('lat');
const lonEl=()=>document.getElementById('lon');

function showStatus(m,t){const s=document.getElementById('status');s.textContent=m;s.className=t;}

document.addEventListener('DOMContentLoaded', initMap);
</script>

</body>
</html>
